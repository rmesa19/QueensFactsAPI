<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Queens Facts | Discover NYC's Most Diverse Borough</title>
    <link rel="icon" type="image/x-icon" href="/static/favicon.ico">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>
    <script src="https://unpkg.com/feather-icons"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap');
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #f8f9fa;
            transition: background 0.5s ease;
        }
        .dark-mode body {
            background: linear-gradient(135deg, #1a1a2e 0%, #4a148c 100%);
            color: #f8f9fa;
        }
        .queens-gradient {
            background: linear-gradient(135deg, #0057b7 0%, #ffd700 100%);
        }
        .dark-mode .queens-gradient {
            background: linear-gradient(135deg, #0f3460 0%, #892cdc 100%);
        }
        .dark-mode .fact-card,
        .dark-mode .bg-blue-50,
        .dark-mode .bg-yellow-50,
        .dark-mode .bg-red-50 {
            background-color: rgba(26, 26, 46, 0.8) !important;
            color: #f8f9fa;
        }
        .dark-mode .text-gray-600 {
            color: #d1d5db !important;
        }
        .dark-mode .bg-gray-800 {
            background-color: #0f0f1a !important;
        }
        .dark-mode .border-gray-700 {
            border-color: #2d2d42 !important;
        }
        .fact-card {
            min-height: 300px;
            transition: all 0.3s ease;
        }
        .fact-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        .pulse {
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.05);
            }
            100% {
                transform: scale(1);
            }
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Header with NYC Skyline -->
    <header class="queens-gradient text-white pb-20">
        <div class="container mx-auto px-4 pt-8">
            <div class="flex justify-between items-center">
                <div>
                    <h1 class="text-4xl font-bold">Queens Facts</h1>
                    <p class="text-lg mt-2">Discover the most diverse place on Earth</p>
                </div>
                <div class="hidden md:block">
                    <img src="http://static.photos/cityscape/1200x630/42" alt="Queens skyline" class="h-20 rounded-lg shadow-lg">
                </div>
            </div>
            <div class="mt-12 text-center" data-aos="fade-up">
                <div class="inline-block bg-white bg-opacity-20 backdrop-blur-sm rounded-full p-1">
                    <i data-feather="map-pin" class="inline text-yellow-300"></i>
                    <span class="ml-2 font-medium">Queens, New York</span>
                </div>
                <h2 class="text-3xl md:text-5xl font-bold mt-6">Did You Know?</h2>
                <p class="mt-4 max-w-2xl mx-auto text-lg">Press the button below to discover fascinating facts about Queens</p>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-4 -mt-16">
        <div class="max-w-4xl mx-auto">
            <!-- Fact Display Card -->
            <div class="bg-white dark:bg-gray-800 rounded-xl shadow-xl p-8 md:p-10 fact-card" data-aos="zoom-in">
                <div class="text-center">
                    <i data-feather="info" class="text-blue-600 w-12 h-12 mx-auto"></i>
                    <div id="fact-container" class="mt-6">
                        <p class="text-gray-600 dark:text-gray-300 italic">Loading your first Queens fact...</p>
                    </div>
                    <button id="new-fact-btn" class="queens-gradient text-white font-bold py-3 px-8 rounded-full mt-8 hover:opacity-90 transition-all duration-300 shadow-lg pulse flex items-center mx-auto">
                        <i data-feather="refresh-cw" class="mr-2"></i> Get Another Fact
                    </button>
                </div>
            </div>

            <!-- Queens Highlights Section -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mt-12">
                <div class="bg-blue-50 dark:bg-gray-800 rounded-lg p-6" data-aos="fade-up" data-aos-delay="100">
                    <i data-feather="globe" class="text-blue-600 w-8 h-8"></i>
                    <h3 class="font-bold text-lg mt-4">Cultural Diversity</h3>
                    <p class="mt-2 text-gray-600">Over 130 languages are spoken in Queens, making it the most ethnically diverse urban area in the world.</p>
                </div>
                <div class="bg-yellow-50 dark:bg-gray-800 rounded-lg p-6" data-aos="fade-up" data-aos-delay="200">
                    <i data-feather="home" class="text-yellow-600 w-8 h-8"></i>
                    <h3 class="font-bold text-lg mt-4">Iconic Neighborhoods</h3>
                    <p class="mt-2 text-gray-600 dark:text-gray-300">From Astoria to Flushing, each neighborhood offers unique cultural experiences and cuisines.</p>
                </div>
                <div class="bg-red-50 dark:bg-gray-800 rounded-lg p-6" data-aos="fade-up" data-aos-delay="300">
                    <i data-feather="film" class="text-red-600 w-8 h-8"></i>
                    <h3 class="font-bold text-lg mt-4">Film Industry Hub</h3>
                    <p class="mt-2 text-gray-600 dark:text-gray-300">Kaufman Astoria Studios has been home to productions from Sesame Street to Orange is the New Black.</p>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white mt-16 py-12">
        <div class="container mx-auto px-4">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <div class="mb-6 md:mb-0">
                    <h3 class="text-xl font-bold">Queens Facts</h3>
                    <p class="mt-2 text-gray-400">Discovering the borough that never sleeps (as much as Manhattan)</p>
                </div>
                <div class="flex space-x-4">
                    <a href="#" class="text-gray-400 hover:text-white transition-colors">
                        <i data-feather="twitter"></i>
                    </a>
                    <a href="#" class="text-gray-400 hover:text-white transition-colors">
                        <i data-feather="instagram"></i>
                    </a>
                    <a href="#" class="text-gray-400 hover:text-white transition-colors">
                        <i data-feather="facebook"></i>
                    </a>
                </div>
            </div>
            <div class="border-t border-gray-700 mt-8 pt-8 text-center text-gray-400">
                <p>© 2023 Queens Facts. Made with ❤️ for NYC's most diverse borough.</p>
            </div>
        </div>
    </footer>

    <script>
        // // Check if it's after 6pm EST
        // function isNightTime() {
        //     const now = new Date();
        //     const estOffset = -5 * 60; // EST is UTC-5
        //     const estTime = new Date(now.getTime() + (now.getTimezoneOffset() + estOffset) * 60000);
        //     return estTime.getHours() >= 18; // 6pm or later
        // }

        // // Apply dark mode if needed
        // function applyDarkMode() {
        //     if (isNightTime()) {
        //         document.documentElement.classList.add('dark-mode');
        //     }
        // }

        // // Initialize AOS, Feather Icons and Dark Mode
        // document.addEventListener('DOMContentLoaded', function() {
        //     AOS.init({
        //         duration: 800,
        //         easing: 'ease-in-out',
        //         once: true
        //     });
        //     feather.replace();
        //     applyDarkMode();
        // });

            // Function to fetch a random fact from backend
        async function fetchRandomFact() {
            try {
                const res = await fetch("/api/facts?random=true&limit=1");
                const data = await res.json();
                if (Array.isArray(data) && data.length > 0) {
                    return data[0].fact_text || JSON.stringify(data[0]);
                } else if (data.fact_text) {
                    return data.fact_text;
                }
                return "No fact available right now.";
            } catch (err) {
                console.error("Error fetching fact:", err);
                return "Error fetching fact.";
            }
        }

        // Display initial fact
        document.addEventListener('DOMContentLoaded', async function() {
            const factContainer = document.getElementById('fact-container');
            factContainer.innerHTML = `
                <p class="text-2xl md:text-3xl font-medium text-gray-800 dark:text-gray-100">
                    ${await fetchRandomFact()}
                </p>
            `;
        });

        // Button click event
        document.getElementById('new-fact-btn').addEventListener('click', async function() {
            const factContainer = document.getElementById('fact-container');
            const btn = this;

            btn.innerHTML = '<i data-feather="loader" class="animate-spin mr-2"></i> Loading...';
            feather.replace();

            const fact = await fetchRandomFact();

            factContainer.innerHTML = `
                <p class="text-2xl md:text-3xl font-medium text-gray-800 animate__animated animate__fadeIn">
                    ${fact}
                </p>
            `;

            btn.innerHTML = '<i data-feather="refresh-cw" class="mr-2"></i> Get Another Fact';
            feather.replace();

            factContainer.classList.add('animate__animated', 'animate__fadeIn');
            setTimeout(() => factContainer.classList.remove('animate__animated', 'animate__fadeIn'), 1000);
        });

    </script>
</body>
</html>
